{# Linked to from application menu & newtab page. 

Designed (using typography) to make it quick to locate particular dates
and to visually communicate the paths surfers took through this history. #}
<!DOCTYPE html>
<html>
<head>
  <title>[document-open-recent] History</title>
  <style>@import url('butterick.css');</style>
</head>
<body>
  <h1>{% trans %}Browser History{% endtrans %}</h1>
  <dl>{% query %}SELECT rowid, tab, uri, title, favicon, visited_at, referrer
        FROM page_visit ORDER BY visited_at DESC;
  {% each-row as visit %}
    {% with date=visit.visited_at %}
      {% ifchanged date|date:"YMd" %}<dt>
        {% ifchanged date|date:"d" %}<strong>{{date|date:"d"}}</strong>{% else %}{{date|date:"d"}}{% endifchanged %}
        {% ifchanged date|date:"M" %}<strong>{{date|date:"M"}}</strong>{% else %}{{date|date:"M"}}{% endifchanged %}
        {% ifchanged date|date:"Y" %}<strong>{{date|date:"Y"}}</strong>{% else %}{{date|date:"Y"}}{% endifchanged %}
      </dt>{% endichanged %}
    {% endwith %}
    <dd data-tab="{{visit.tab}}" data-date="{{visit.visited_at}}"
            id="visit-{{visit.rowid}}" aria-flow-from="visit-{{visit.referrer}}">
      <em>{% ifchanged visit.visited_at|date:"H" %}<strong>{{visit.visited_at|date:"H"}}</strong>
        {% else %}{{visit.visited_at|date:"H"}}{% endifchanged %}:{{visit.visited_at|date:"m"}}</em>
      <a href="{{ visit.uri }}">{{visit.title}}</a>
    </dd>
  {% endquery %}</dl>
</body>
</html>
